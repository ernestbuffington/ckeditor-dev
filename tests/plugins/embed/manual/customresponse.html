<style>
	label {
		display: block;
	}

	.container {
		width: 500px;
	}
</style>
<p id="controls">
	<label><input value="thumbnail" type="checkbox">Thumbnail</label>
	<label><input value="title" type="checkbox">Title</label>
	<label><input value="description" type="checkbox">Description</label>
	<label><input value="provider" type="checkbox">Provider</label>
	<label><input value="compact" type="checkbox">Compact card</label>
	<button>Create widget</button>
</p>

<div class="container">
	<div id="editor"></div>
</div>

<script>
	var editor = CKEDITOR.inline( 'editor', {
			embed_provider: '//ckeditor.iframe.ly/api/oembed?url={url}&callback={callback}',
			readOnly: true,
			allowedContent: true
		} ),
		inputs = CKEDITOR.document.find( '#controls input' ).toArray();

	CKEDITOR.document.findOne( '#controls button' ).on( 'click', function() {
		var response = {
			type: 'rich',
			html: '<script src="//if-cdn.com/embed.js"><\/script>',
			url: 'http://ckeditor.com'
		};

		CKEDITOR.tools.array.forEach( inputs, function( input ) {
			if ( input.$.checked ) {
				switch( input.getAttribute( 'value' ) ) {
					case 'thumbnail':
						response.thumbnail_url = '../../../_assets/lena.jpg';
						break;
					case 'title':
						response.title = 'Title';
						break;
					case 'description':
						response.description = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod ' +
							'tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud ' +
							'exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure ' +
							'dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.';
						break;
					case 'provider':
						response.provider_name = 'Provider';
						break;
					case 'compact':
						response.html += '<div style="height">Baz</div>';
				}
			}
		} );

		editor.setData( editor.widgets.registered.embed._generateContent( response ) );
	} );
</script>
